{{- $clientId := "" -}}
{{- $clientSecret := "" -}}
{{- if (and (hasKey . "infisical") (hasKey .infisical "clientId")) -}}
{{-   $clientId = .infisical.clientId -}}
{{- end -}}
{{- if (and (hasKey . "infisical") (hasKey .infisical "clientSecret")) -}}
{{-   $clientSecret = .infisical.clientSecret -}}
{{- end -}}

{{- if or (eq .chezmoi.hostname "raspberrypi") (eq .chezmoi.hostname "secrets") }}
{{-   if not $clientId -}}
{{-     $clientId = promptString "Infisical Client ID" -}}
{{-   end -}}
{{-   if not $clientSecret -}}
{{-     $clientSecret = promptString "Infisical Client Secret" -}}
{{-   end -}}
{{- end }}

[data.infisical]
    projectId = "8ae0704f-ad44-4984-bbeb-64b61faa46b5"
{{- if or (eq .chezmoi.hostname "raspberrypi") (eq .chezmoi.hostname "secrets") }}
    clientId = {{ $clientId | quote }}
    clientSecret = {{ $clientSecret | quote }}
{{- end }}
